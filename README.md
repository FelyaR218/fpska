# fpska v0.4

* С помощью этого скрипта можно перевести видео с частотой 25/30 кадров в секунду в видео с частотой 50/60 кадров в секунду, 
посредством создания и добавления промежуточных кадров. 
* Скрипт работает с видеороликами любого разрешения и любого формата. Не нужно устанавливать никаких кодеков (все идет в комплекте).
* Для рассчета промежуточных кадров используется библиотека svpflow от команды www.svp-team.com.
В зависимости от разрешения исходного видео перекодирование в 50/60 fps может занимать очень много времени и требовать много машинной памяти,
так, например, перекодирование видео в формате 4K идет со скоростью 0.1fps, что очень медленно. Это обусловлено тем, 
что в программе рассчета промежуточных кадров используются настройки для достижения наилучшего качества вставляемых кадров.
Следует сказать, что данный скрипт планировался для перекодирования коротких по времени видеороликов (5-15 минут), 
поэтому все настройки были "взвинчены" на максимальный уровень.

## Установка
* устанавливаем Avisynth из архива distr\AviSynth_260.exe (устанавливаем, как обычное приложение, следуем инструкциям инсталлятора)
* копируем dll'ку distr\avisynth.dll в папки c:\Windows\SysWOW64\ и c:\Windows\System32\
Это многопоточная версия Avisynth библиотеки, специально собранная для работы сплагином svpflow;
* скачиваем библиотеку svpflow (http://www.svp-team.com/files/gpl/svpflow-4.0.0.128.zip), распаковываем архив,
файлы svpflow-4.0.0.128\lib-windows\avisynth\x32\svpflow1.dll и svpflow2.dll копируем в папку fpska\svpflow\.
Внимание, берем именно 32-битные файлы.
Если svpflow1.dll и svpflow2.dll не будут скопированы в папку fpska\svpflow, то при запуске конвертирования будет сообщение об ошибке:
```javascript
"---------------------------"
Net biblioteki svpflow1.dll
svpflow\readme.txt - instruktsiya po ustanovke
"---------------------------"
```


### Запуск
fpska.bat <файл с видео> <режим> <число процессоров>
<режим> - "fast", "slow"
* slow - чистовое конвертирование
* fast - проверка установки и настроек

<число процессоров> - тесты показали, что при использовании 6-и процессоров увеличение скорости ковертирования равно 4

Со скриптом поставляется тестовый видеоролик video.mov, запуск перекодирования будет выглядеть так:

*Hi-Quality*
```javascript
fpska.bat video.mov slow 2 
```
Медленно рассчитывает промежуточные кадры и медленно кодирует, зато качество видео максимальное.


*Low-Quality*
```javascript
fpska.bat video.mov fast 2 
```
Этот режим используется для проверки установки всего пакета.


После того, как процесс кодирования закончится в текущей папке появится файл 60fps.mkv - это и будет результирующее видео.

Важно убедиться, что антивирусное программа не блокирует скрипты и не запускает их в отдельной "песочнице". Я долго разбирался
со скриптом, который запускал процесс кодирования, но результирующего файла не появлялось в рабочей папке. Все дело было
в Comodo Firewall, который запускал fpsk'у в изолированном пространстве.

